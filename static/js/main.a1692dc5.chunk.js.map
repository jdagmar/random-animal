{"version":3,"sources":["State.tsx","components/Button.tsx","components/ButtonGroup.tsx","components/Card.tsx","components/Header.tsx","components/MainContent.tsx","API/animal.ts","App.tsx","index.tsx"],"names":["gotAnimalResponseAction","res","type","payload","animalRequestedAction","initState","currentAnimal","tag","reducer","state","action","response","reason","url","FilledButton","styled","button","Button","props","onClick","animalType","text","InlineButtonGroup","div","ButtonGroup","children","mediaSize","Image","img","ImageWrapper","Paragraph","p","shimmer","keyframes","Skeleton","Card","animal","height","width","controls","src","alt","getCardContent","HeaderContainer","HeaderContent","header","MainHeading","h1","Preamble","Header","Main","main","MainContent","getCat","fetch","then","json","data","succeededResponse","file","catch","responseFailed","getDog","endsWith","App","useReducer","dispatch","requestAnimal","useCallback","AnimalApi","onload","onerror","GlobalStyles","createGlobalStyle","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.a1692dc5.chunk.js","sourcesContent":["import { AnimalResponse } from './API/animal';\n\nexport type Action = GotAnimalResponseAction | AnimalRequstedAction;\n\nexport type GotAnimalResponseAction = {\n  type: 'gotAnimalResponse';\n  payload: AnimalResponse;\n};\n\ntype AnimalRequstedAction = {\n  type: 'animalRequested';\n};\n\nexport const gotAnimalResponseAction = (\n  res: AnimalResponse\n): GotAnimalResponseAction => ({ type: 'gotAnimalResponse', payload: res });\n\nexport const animalRequestedAction: AnimalRequstedAction = {\n  type: 'animalRequested',\n};\n\nexport type Animal =\n  | {\n      tag: 'got animal';\n      url: string;\n      type: 'video' | 'image';\n    }\n  | { tag: 'waiting' }\n  | { tag: 'placeholder' }\n  | { tag: 'fail'; reason: string };\n\nexport type State = {\n  currentAnimal: Animal;\n};\n\nexport const initState: State = {\n  currentAnimal: { tag: 'placeholder' },\n};\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'gotAnimalResponse':\n      if (action.payload.response === 'fail') {\n        return {\n          ...state,\n          currentAnimal: {\n            tag: 'fail',\n            reason: action.payload.reason,\n          },\n        };\n      } else {\n        return {\n          ...state,\n          currentAnimal: {\n            tag: 'got animal',\n            url: action.payload.url,\n            type: action.payload.tag,\n          },\n        };\n      }\n    case 'animalRequested':\n      return {\n        ...state,\n        currentAnimal: {\n          tag: 'waiting',\n        },\n      };\n  }\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { AnimalType } from '../API/animal';\n\ntype Props = {\n  animalType: AnimalType;\n  onClick: (animalType: AnimalType) => void;\n  text: string;\n};\n\nconst FilledButton = styled.button`\n  cursor: pointer;\n  background-color: #db6400;\n  color: #181a18;\n  border: none;\n  padding: 0.7rem 1.6rem;\n  margin: 0.5rem;\n  letter-spacing: 1px;\n  font-size: 1.2rem;\n  border-radius: 0.25rem;\n\n    &:hover {\n      background-color: #ffa62b;\n      transition: background-color 500ms ease-in-out;\n    }\n  }\n`;\n\nexport const Button = (props: Props) => {\n  return (\n    <div>\n      <FilledButton onClick={() => props.onClick(props.animalType)}>\n        {props.text}\n      </FilledButton>\n    </div>\n  );\n};\n","import React, { ReactNode } from 'react';\nimport styled from 'styled-components';\n\ntype Props = {\n  children: ReactNode;\n};\n\nconst InlineButtonGroup = styled.div`\n  display: flex;\n  justify-content: center;\n  width: 100%;\n  margin-bottom: 2rem;\n`;\n\nexport const ButtonGroup = (props: Props) => {\n  return <InlineButtonGroup>{props.children}</InlineButtonGroup>;\n};\n","import React from 'react';\nimport styled, { keyframes } from 'styled-components';\nimport { Animal } from '../State';\n\ntype Props = {\n  animal: Animal;\n};\n\nconst mediaSize = '350px';\n\nconst Image = styled.img`\n  max-width: 100%;\n  width: ${mediaSize};\n  height: ${mediaSize};\n  object-fit: cover;\n`;\n\nconst ImageWrapper = styled.div`\n  max-width: 475px;\n  max-height: 475px;\n  margin: 0.5rem auto;\n`;\n\nconst Paragraph = styled.p`\n  color: #ffffff;\n  font-size: 1.3rem;\n`;\n\nconst shimmer = keyframes`\n  100% {\n    transform: translateX(100%);\n  }\n`;\n\nconst Skeleton = styled.div`\n  width: ${mediaSize};\n  height: ${mediaSize};\n  display: inline-block;\n  position: relative;\n  overflow: hidden;\n  background-color: #dddbdd;\n\n  &:after {\n    content: '';\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    transform: translateX(-100%);\n    background-image: linear-gradient(\n      90deg,\n      rgba(255, 255, 255, 0) 0,\n      rgba(255, 255, 255, 0.2) 20%,\n      rgba(255, 255, 255, 0.5) 60%,\n      rgba(255, 255, 255, 0)\n    );\n    animation: ${shimmer} 2s infinite;\n  }\n`;\n\nexport const Card = (props: Props) => {\n  const getCardContent = () => {\n    switch (props.animal.tag) {\n      case 'got animal':\n        return props.animal.type === 'video' ? (\n          <video height={mediaSize} width={mediaSize} controls>\n            <source src={props.animal.url} type=\"video/mp4\" />\n          </video>\n        ) : (\n          <ImageWrapper>\n            <Image src={props.animal.url} alt=\"\" />\n          </ImageWrapper>\n        );\n      case 'fail':\n        return <Paragraph>{props.animal.reason}</Paragraph>;\n\n      case 'waiting':\n        return <Skeleton></Skeleton>;\n    }\n  };\n\n  return <div>{getCardContent()}</div>;\n};\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst HeaderContainer = styled.div`\n  width: 100%;\n`;\nconst HeaderContent = styled.header`\n  margin: auto;\n  color: #16697a;\n`;\n\nconst MainHeading = styled.h1`\n  background-color: #ffffff;\n  margin: 0;\n  padding: 1.5rem 1rem;\n  font-size: clamp(2rem, 1.2rem + 1.3333vw, 3rem);\n`;\n\nconst Preamble = styled.p`\n  max-width: 450px;\n  margin: auto;\n  text-align: center;\n  color: #ffffff;\n  padding: 2.5rem 1rem;\n  font-size: clamp(1.5rem, 1.2rem + 1.3333vw, 2rem);\n`;\n\nexport const Header = () => {\n  return (\n    <HeaderContainer>\n      <HeaderContent>\n        <MainHeading>Random animal</MainHeading>\n        <Preamble>\n          Need some cheering up? How about a random picture of a dog or a cat?\n        </Preamble>\n      </HeaderContent>\n    </HeaderContainer>\n  );\n};\n","import React, { ReactNode } from 'react';\nimport styled from 'styled-components';\n\ntype Props = {\n  children: ReactNode;\n};\n\nconst Main = styled.main`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n`;\n\nexport const MainContent = (props: Props) => {\n  return <Main>{props.children}</Main>;\n};\n","export type AnimalResponse =\n  | {\n      response: 'success';\n      url: string;\n      tag: \"image\" | \"video\";\n    }\n  | { response: 'fail'; reason: string };\n\nexport type AnimalType = 'Cat' | 'Dog';\n\nexport const get = (animalType: AnimalType): Promise<AnimalResponse> => {\n  switch (animalType) {\n    case 'Cat':\n      return getCat();\n    case 'Dog':\n      return getDog();\n  }\n};\n\nconst getCat = (): Promise<AnimalResponse> =>\n  fetch('https://aws.random.cat/meow')\n    .then(response => response.json())\n    .then((data): AnimalResponse => succeededResponse(data.file))\n    .catch(() => responseFailed('Could not get cat'))\n\nconst getDog = (): Promise<AnimalResponse> =>\n  fetch('https://random.dog/woof.json')\n    .then(response => response.json())\n    .then((data): AnimalResponse => succeededResponse(data.url))\n    .catch(() => responseFailed('Could not get dog'));\n\nconst responseFailed = (reason: string): AnimalResponse => ({\n  response: 'fail',\n  reason,\n});\n\nconst succeededResponse = (url: string): AnimalResponse => ({\n  response: 'success',\n  url,\n  tag: url.endsWith('.mp4') ? \"video\" : \"image\"\n});\n","import React, { useReducer, useCallback } from 'react';\nimport {\n  Action,\n  State,\n  initState,\n  reducer,\n  animalRequestedAction,\n  gotAnimalResponseAction,\n} from './State';\nimport { Card, Button, ButtonGroup, Header, MainContent } from './components';\nimport * as AnimalApi from './API/animal';\n\nexport const AppContext = React.createContext([\n  initState,\n  (() => {}) as React.Dispatch<Action>,\n] as [State, React.Dispatch<Action>]);\n\nexport const App = () => {\n  const [state, dispatch] = useReducer(reducer, initState);\n\n  const requestAnimal = useCallback((animalType: AnimalApi.AnimalType) => {\n    dispatch(animalRequestedAction);\n    AnimalApi.get(animalType).then(res => {\n      if (res.response === 'success') {\n        if (res.tag === 'video') {\n          dispatch(gotAnimalResponseAction(res));\n        } else {\n          // Preload image before dispatch\n          const img = new Image();\n          img.onload = () => dispatch(gotAnimalResponseAction(res));\n          img.onerror = () =>\n            dispatch(\n              gotAnimalResponseAction({\n                response: 'fail',\n                reason: 'Failed to fetch 🥎',\n              })\n            );\n\n          img.src = res.url;\n        }\n      } else {\n        dispatch(gotAnimalResponseAction(res));\n      }\n    });\n  }, []);\n\n  return (\n    <MainContent>\n      <Header />\n      <ButtonGroup>\n        <Button\n          animalType=\"Cat\"\n          onClick={requestAnimal}\n          text=\"Cat pic plz 🐱\"\n        />\n        <Button\n          animalType=\"Dog\"\n          onClick={requestAnimal}\n          text=\"Dog pic plz 🐶\"\n        />\n      </ButtonGroup>\n      <Card animal={state.currentAnimal} />\n    </MainContent>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\nimport { createGlobalStyle } from 'styled-components';\n\nconst GlobalStyles = createGlobalStyle`\n  body {\n    background: #16697a;\n    margin: 0;\n    font-family: 'Roboto', sans-serif;\n    line-height: 1.8;\n  }\n`;\n\nconst rootElement = document.getElementById('root');\nReactDOM.render(\n  <>\n    <GlobalStyles />\n    <App />\n  </>,\n  rootElement\n);\n"],"sourceRoot":""}